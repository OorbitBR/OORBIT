const queryString=window.location.search,urlParams=new URLSearchParams(queryString);var multi,idev,o,s3path,path,ap,error,url,logo,orb,geo,hide,exer,seats,form,ARmenu,ARstate,ARparams,ARmsg,token=urlParams.get("a"),iat=urlParams.get("b"),mode=urlParams.get("c")||CONFIG.mode,pass=urlParams.get("d")||CONFIG.pass;(CONFIG&&mode==CONFIG.mode||dev)&&(idev=!0);var spre="_js/",ssuf=".js",git="https://cdn.jsdelivr.net/gh/OorbitBR/OORBIT@";function headScript(){var e=arr[0],r=document.createElement("script");r.src=e,arr.shift(),r.onload=()=>{dev&&console.log("loaded",e),e.includes("oorbit")?loadGroup(mode,iat,progress):headScript(arr)},document.head.appendChild(r)}idev||(spre=git+version.OORBIT+"/builds/"),version.min&&(ssuf=".min.js");var arr=[],bc=mode.slice(-2);85==bc||86==bc?(arr.push("https://cdn.jsdelivr.net/npm/mind-ar@"+version.ARCARD+"/dist/mindar-image.prod.js"),arr.push(spre+"aframe-v"+version.AFRAME+ssuf),arr.push("https://cdn.jsdelivr.net/npm/mind-ar@"+version.ARCARD+"/dist/mindar-image-aframe.prod.js")):87==bc||88==bc?(arr.push("https://cdn.jsdelivr.net/npm/mind-ar@"+version.ARCARD+"/dist/mindar-face.prod.js"),arr.push(spre+"aframe-v"+version.AFRAME+ssuf),arr.push("https://cdn.jsdelivr.net/npm/mind-ar@"+version.ARCARD+"/dist/mindar-face-aframe.prod.js")):arr.push(spre+"aframe-v"+version.AFRAME+ssuf),(83==bc||84==bc)&&(arr.push("https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@"+version.ARPLACE+"/three.js/build/ar-threex-location-only.js"),arr.push("https://cdn.jsdelivr.net/gh/AR-js-org/AR.js@"+version.ARPLACE+"/aframe/build/aframe-ar.js")),arr.push("https://cdn.jsdelivr.net/npm/aframe-troika-text@"+version.TEXT+"/dist/aframe-troika-text.min.js"),arr.push(spre+"environment-v"+version.ENVIRONMENT+ssuf),arr.push("https://cdn.jsdelivr.net/npm/three-pathfinding@"+version.PATHFINDING+"/dist/three-pathfinding.umd.js"),arr.push("https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@"+version.EXTRAS+"/dist/aframe-extras.controls.min.js"),arr.push("https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@"+version.EXTRAS+"/dist/aframe-extras.loaders.min.js"),arr.push("https://cdn.jsdelivr.net/npm/aframe-event-set-component@"+version.EVENTSET+"/dist/aframe-event-set-component.min.js"),arr.push("https://cdn.jsdelivr.net/npm/super-hands@"+version.SUPERHANDS+"/dist/super-hands.min.js"),arr.push(spre+"physx-v"+version.PHYSX+ssuf),arr.push(spre+"physx-aframe-v"+version.PHYSX+ssuf);var physxwasm=spre+"physx-v"+version.PHYSXW+".wasm";function loadGroup(e,r,s){if("GOOG"==r||"FACE"==r||"COGI"==r)return;let t=e.charAt(1),a=e.charAt(2);var n=document.head||document.getElementsByTagName("head")[0];if(6==t||7==t||2==a||4==a||6==a||8==a){multi=!0;var i=document.createElement("script");i.type="text/javascript",i.src="../_js/o-group.js",i.onload=s,n.appendChild(i)}else pass||(pass=!0),progress()}arr.push("https://cdn.jsdelivr.net/gh/faisalman/ua-parser-js@"+version.UAPARSER+"/dist/ua-parser.min.js"),idev?(arr.push("_js/components-a"+version.AFRAME+ssuf),arr.push("_js/oorbit-a"+version.AFRAME+ssuf)):(arr.push("../_js/components-a"+version.AFRAME+ssuf),arr.push("../_js/oorbit-a"+version.AFRAME+ssuf)),headScript();let medias={audio:!1,video:!1},userType="user";var opath="https://c6cimdp8rg.execute-api.us-east-1.amazonaws.com/";function progress(){AFRAME&&AFRAME.components["super-hands"]&&AFRAME.components.environment&&AFRAME.systems.physx?multi?urlParams||idev?getLocalMedia():errorHandler():getWorld():errorHandler("slow")}function getWorld(){idev||token&&""!=token&&iat&&""!=iat&&mode&&""!=mode&&pass&&""!=pass||errorHandler(),$.ajaxSetup({contentType:"application/json; charset=utf-8"}),"GOOG"==iat||"FACE"==iat||"COG1"==iat||"COG2"==iat?(token=decodeURI(token),urlParams.get("e")||document.referrer.indexOf(pass)>-1||mode==AWS.config.credentials.identityId?$.post(opath+"getview",JSON.stringify({a:token,b:iat,c:mode,d:pass}),function(e){showWorld(e.params),$.get(e.file,function(r){appendImport(r),null!=localStorage.getItem("res")&&updateRes(e.viat)}).fail(function(e){errorHandler(e)})}).fail(function(e){errorHandler(e)}):errorHandler("view")):idev?$.get(CONFIG.mod+"/"+CONFIG.mod+".html",function(e){showWorld(CONFIG),appendImport(e)}).fail(function(e){errorHandler(e)}):(url=opath+"getfile/"+token+iat,$.get(url,function(e){e.token&&(token=e.token),showWorld(e.params),$.get(e.file,function(e){appendImport(e)}).fail(function(e){errorHandler(e)})}).fail(function(e){errorHandler(e)}))}function showWorld(e){s3path=e.path,mode=e.mode,logo=e.logo,orb=e.orb,geo=e.geo,hide=e.hide,exer=e.exer,hide||$("#loader").css("display","flex"),geo&&$("#geo").show(),$("script[src*='oorbit']")[0]||$("#overlay").hide()}function appendImport(e){$(document).ready(function(){ap=!0,$("#loader section").css("margin-top",$("#logo").height()+50+"px"),$("#logo").animate({opacity:1},600,function(){$("#logo").animate({top:40},500),setTimeout(function(){$("#loader section").css("margin-top",$("#logo").height()+50+"px"),$("#logo")[0]&&0!=$("#logo").height()||$("#loader section").css("margin-top","220px"),$("#loader section").animate({opacity:1},400),$("#rota").animate({opacity:1},400),setTimeout(function(){idev&&(path=""),orderImport($(e))},400)},500)}),$("#neterror").hide()})}function errorHandler(e){error=!0;let r="00: Tente novamente.";"slow"==e?r="01: Problema de conex\xe3o com a internet.":"socket"==e?r="02: Conex\xe3o indispon\xedvel.":"ar"==e?r="03: Sistema AR n\xe3o carregou.":"view"==e?r="12: Visualiza\xe7\xe3o bloqueada.":null!=e&&null!=e.responseJSON&&(r=e.responseJSON.message),r="Internal Server Error"==r?"E99: Servidor em Manuten\xe7\xe3o.":"E"+r,$("#logo").css("opacity",1),$("#logo").css("top",40),$("#loader section").css("opacity",1),$("#loading-msg").html(r),$("#progress-bar p").html(""),$("#ebar").css("width","0%"),$("#ebar i").html("highlight_off"),$("#ebar i").css("color","red"),$("#circle-loader").hide(),$("#buttons").remove(),$("#sub").remove(),$("#rota").remove(),$("#loader").css("display","flex"),$("#loader section").css("justify-content","center"),$("#progress-bar").append('<b onClick="window.location.reload()" style="text-decoration: underline;color: blue;">Clique aqui para atualizar</b>'),sendError(parseInt(r.substring(4,8)))}function inIframe(){try{return window.self!==window.top}catch(e){return!0}}function sendError(e){inIframe()&&window.addEventListener("message",function(r){if(!r.origin.includes(pass)&&!idev)return;let s=r.origin,t=r.source;!r.data.simulation&&r.data.simulation.error&&(r.data.simulation.error=e,t.postMessage(JSON.stringify({simulation:r.data.simulation}),s))})}function updateRes(e){let r=JSON.parse(localStorage.getItem("res"));r.result.ativos[token.substring(9)][token.substr(0,9)].viat=e,localStorage.setItem("res",JSON.stringify(r))}function orderImport(e){let r;for(r=0;r<e.length;r++)$("body").append(e[r])}CONFIG.console&&($("body").append("<div id='debugdiv'></div>"),"undefined"!=typeof console&&(void 0!==console.log?console.olog=console.log:console.olog=function(){}),console.log=function(e){console.olog(e),$("#debugdiv").append("<p>"+e+"</p>")},console.error=console.debug=console.info=console.log);